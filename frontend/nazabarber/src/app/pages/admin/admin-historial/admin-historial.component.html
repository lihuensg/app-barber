<div class="admin-historial">
  <!-- Mensaje de Éxito -->
  <div class="toast toast-exito" *ngIf="mensajeExito">
    {{ mensajeExito }}
  </div>

  <!--  Mensaje de Error -->
  <div class="toast toast-error" *ngIf="mensajeError">
    {{ mensajeError }}
  </div>

  <!--  Modal de Confirmación -->
  <!-- Modal de confirmación para cancelar turno -->
  <div *ngIf="mostrarModalConfirmacion" class="modal-overlay">
    <div class="modal-contenido">
      <h3>¿Estás seguro que querés cancelar este turno?</h3>
      <p>
        <strong>
          {{ obtenerNombreDia(turnoPendienteCancelar?.fecha) }} -
          {{ formatearFecha(turnoPendienteCancelar?.fecha) }} -
          {{ formatearHora(turnoPendienteCancelar?.hora) }}
        </strong>
      </p>
      <div class="modal-botones">
        <button class="btn btn-danger" (click)="confirmarCancelacion()">
          Cancelar Turno
        </button>
        <button class="btn btn-cancelar" (click)="cancelarModal()">
          Volver
        </button>
      </div>
    </div>
  </div>

  <!--  Listado de Turnos Futuros -->
  <section>
    <h2 class="titulo-seccion">Turnos Futuros</h2>
    <div *ngFor="let dia of diasFuturos" class="dia-card">
      <div class="dia-header" (click)="dia.expandido = !dia.expandido">
        <span>{{ dia.nombre }} - {{ dia.fechaFormateada }}</span>
        <span>{{ dia.expandido ? "▲" : "▼" }}</span>
      </div>

      <div *ngIf="dia.expandido" class="turnos-lista">
        <div
          *ngFor="let turno of turnosPorDiaFuturos[dia.fecha]"
          class="turno-item"
        >
          <span><strong>Hora:</strong> {{ formatearHora(turno.hora) }}</span>
          <span
            ><strong>Nombre:</strong>
            {{ turno.nombre_manual || "Anónimo" }}</span
          >
          <span *ngIf="turno.email_manual"
            ><strong>Email:</strong> {{ turno.email_manual }}</span
          >
          <span *ngIf="turno.telefono"
            ><strong>Teléfono:</strong> {{ turno.telefono }}</span
          >

          <button class="btn-cancelar-turno" (click)="cancelarTurno(turno)">
            Cancelar
          </button>
        </div>
      </div>
    </div>
  </section>

  <!--  Listado de Turnos Pasados -->
  <section>
    <h2 class="titulo-seccion">Turnos Pasados</h2>
    <div *ngFor="let dia of diasPasados" class="dia-card">
      <div class="dia-header" (click)="dia.expandido = !dia.expandido">
        <span>{{ dia.nombre }} - {{ dia.fechaFormateada }}</span>
        <span>{{ dia.expandido ? "▲" : "▼" }}</span>
      </div>

      <div *ngIf="dia.expandido" class="turnos-lista">
        <div
          *ngFor="let turno of turnosPorDiaPasados[dia.fecha]"
          class="turno-item"
        >
          <span><strong>Hora:</strong> {{ formatearHora(turno.hora) }}</span>
          <span
            ><strong>Nombre:</strong>
            {{ turno.nombre_manual || "Anónimo" }}</span
          >
          <span *ngIf="turno.email_manual"
            ><strong>Email:</strong> {{ turno.email_manual }}</span
          >
          <span *ngIf="turno.telefono"
            ><strong>Teléfono:</strong> {{ turno.telefono }}</span
          >
        </div>
      </div>
    </div>
  </section>
</div>
